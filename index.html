<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smart Attend+</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">

  <!-- External CSS -->
  <link rel="stylesheet" href="style.css">

  <!-- Google Charts -->
  <script src="https://www.gstatic.com/charts/loader.js"></script>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>
<body>

  <!-- ================= LOGIN PAGE ================= -->
  <div id="login-page">
    <div class="card login-card">
      <h2>Smart Attend+</h2>
      <p class="sub">Fair â€¢ Transparent â€¢ Stress-Free</p>
      <input id="email" type="email" placeholder="College Email" required>
      <input id="password" type="password" placeholder="Password" required>
      <select id="role">
        <option value="student">Student</option>
        <option value="teacher">Teacher</option>
      </select>
      <button onclick="login()">Login</button>
      <p id="login-error" class="error-msg"></p>
    </div>
  </div>

  <!-- ================= DASHBOARD ================= -->
  <div id="dashboard" class="dashboard" style="display:none;">
    <header>
      ğŸŒ¸ Smart Attendance & Wellness Portal
      <button onclick="logout()">Logout</button>
    </header>

    <div class="user-info">
      <div>
        <span id="user-email"></span> | <span id="user-role"></span>
      </div>
      <div>
        <span id="quoteText"></span>
      </div>
    </div>

    <div class="dashboard-grid">

      <!-- TEACHER: GENERATE QR -->
      <div class="card teacher-only">
        <h3>ğŸ“· Generate QR</h3>
        <button onclick="generateQR()">Generate QR</button>
        <p id="qr-output"></p>
      </div>

      <!-- STUDENT: SCAN QR & ATTENDANCE -->
      <div class="card student-only">
        <h3>ğŸ“· Scan QR & Mark Attendance</h3>
        <button onclick="markAttendance()">Scan QR</button>
        <p id="attendance-status"></p>
      </div>

      <!-- STUDENT: ATTENDANCE PREDICTION -->
      <div class="card student-only">
        <h3>ğŸ“Š Attendance Prediction</h3>
        <button onclick="getPrediction()">Predict Attendance Risk</button>
        <p id="prediction-status"></p>
      </div>

      <!-- STUDENT: REQUEST CORRECTION -->
      <div class="card student-only">
        <h3>ğŸ” Request Correction</h3>
        <button onclick="requestCorrection()">Request Correction</button>
        <p id="correction-status"></p>
      </div>

      <!-- TEACHER: VIEW & APPROVE CORRECTIONS -->
      <div class="card teacher-only">
        <h3>âœ… Pending Corrections</h3>
        <div id="correction-requests"></div>
      </div>

      <!-- TEACHER: EDIT CLASSES -->
      <div class="card teacher-only">
        <h3>ğŸ“ Edit Today's Classes</h3>
        <div id="edit-classes"></div>
      </div>

      <!-- TODAY'S CLASSES -->
      <div class="card">
        <h3>ğŸ¯ Today's Classes</h3>
        <div id="todays-classes">
          <p>No classes scheduled for today</p>
        </div>
      </div>

      <!-- AUDIT LOGS -->
      <div class="card">
        <h3>ğŸ§¾ Audit Logs</h3>
        <div id="audit-logs"></div>
      </div>

      <!-- AUDIT GRAPH -->
      <div class="card">
        <h3>ğŸ“ˆ Audit Graph</h3>
        <div id="auditGraph" style="height:300px;"></div>
      </div>

    </div>
  </div>

  <!-- ================= FIREBASE CONFIG ================= -->
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDehcanIPU9BuOuI7qOFjW7cAFXRSExIB0",
      authDomain: "attendx-6be15.firebaseapp.com",
      projectId: "attendx-6be15",
      storageBucket: "attendx-6be15.appspot.com",
      messagingSenderId: "593387890331",
      appId: "1:593387890331:web:f11e81a9ac30f23dbc083e"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();
  </script>

  <!-- APP JS -->
  <script src="app.js"></script>

</body>
</html>
